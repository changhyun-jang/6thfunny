<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ticket Tier Adviser</title>
    <link rel="stylesheet" href="css/review_all.css" />
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="icon" href="./img/logo2.png" />
    <style>
      /* 0726 사이드바 */
     @media screen and (max-width: 768px) {
       .menuBar span {
          display: none;
       }
        .menu_btn {
          display: inline-block;
            float: right;
          }
      }
      </style>
    <script
      type="text/javascript"
      src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=xpmj5g73ov"
    ></script>

    <script
      src="https://kit.fontawesome.com/5286d2d6db.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> <!--0726-->
    <script type="text/javascript">
      function win_open(page, name) {
        // window.open("팝업될 문서 경로","팝업될 문서 이름","옵션(위치, bar표시, 크기 등)");
        window.open(page, name, "width=300, height=400, left=0, top=0");
      }
    </script>
  </head>
  <body>
    <header>
      <img
        onclick="gotoMain()"
        src="/img/logo2.png"
        alt="팀 로고"
        class="mainlogo"
      />
      <div class="menuBar">
        <span>찾아보기</span>
        <span>로그인</span>
      </div>
      <!-- 0726 사이드바 부분 -->
      <div class="menu_btn"><a href="#">       
        <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMjQgNmgtMjR2LTRoMjR2NHptMCA0aC0yNHY0aDI0di00em0wIDhoLTI0djRoMjR2LTR6Ii8+PC9zdmc+">
        </a>
        </div>
    </div>
    <div class="menu_bg"></div>
    <div class="sidebar_menu">
      <div class="close_btn">
        <a href="#">
          <img
            src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMjMuOTU0IDIxLjAzbC05LjE4NC05LjA5NSA5LjA5Mi05LjE3NC0yLjgzMi0yLjgwNy05LjA5IDkuMTc5LTkuMTc2LTkuMDg4LTIuODEgMi44MSA5LjE4NiA5LjEwNS05LjA5NSA5LjE4NCAyLjgxIDIuODEgOS4xMTItOS4xOTIgOS4xOCA5LjF6Ii8+PC9zdmc+"
          />
        </a>
      </div>
      <div class="menu_wrap">
        <span>로그인</span>
        <span onclick="gotoreview()">찾아보기</span>
      </div>
    </header>
    <div class="main">
      <div class="search">
        <select name="selectBox" id="selectbox" onchange="changeThemeSelect()">
          <option value="" selected disabled>검색테마</option>
          <option value="selectChair">좌석</option>
          <option value="selectplace">장소</option>
        </select>
        <i class="fa-solid fa-magnifying-glass"></i>
        <input
          type="search"
          id="search_review"
          placeholder="예시) VIP석 1층 4열"
          onchange="f_search_review()"
        />
        <img src="/img/logo2.png" alt="팀 로고" class="mainlogo" />
      </div>
      <div class="ticketContents">
        <div class="forhr">
          <div class="card">
            <div class="num"></div>
            <img src="./img/review_img_example01.jpg" alt="" class="cardImg" />
            <div class="cardContent">
              <p class="title">VIP석 1층 4열 20번</p>
              <br />
              <ul class="info">
                <li>
                  <strong class="infolabel">장소</strong>
                  <div class="infocontent mapopen">
                    <span class="infocontent_title">신한 블루스퀘어</span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-caret-right-fill"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"
                      />
                    </svg>
                  </div>
                </li>
                <li>
                  <strong class="infolabel">가격</strong>
                  <div class="infocontent" id="costs">170,000원</div>
                </li>
                <li>
                  <strong class="infolabel">추가 후기글</strong>
                  <br />
                  <div class="infocontent word" id="" style="margin-top: 3px">
                    배우들의 얼굴 표정까지 모두 보여 오페라 글라스 대여는 안해도
                    되요! 배우님들의 연기를 실감나게 관람할 수 있는 자리에요!
                  </div>
                </li>
              </ul>
              <button
                class="btn"
                onclick="win_open('all_review_popup1.html','a','width=1000px height=500px')"
              >
                더보기
              </button>
              <div class="map"></div>
            </div>
          </div>
          <hr />
        </div>

        <div class="forhr">
          <div class="card">
            <div class="num"></div>
            <img src="./img/review_img_example02.jpg" alt="" class="cardImg" />
            <div class="cardContent">
              <p class="title">VIP석 1층 4열 20번</p>
              <br />
              <ul class="info">
                <li>
                  <strong class="infolabel">장소</strong>
                  <div class="infocontent mapopen">
                    <span class="infocontent_title">신한 블루스퀘어</span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-caret-right-fill"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"
                      />
                    </svg>
                  </div>
                </li>
                <li>
                  <strong class="infolabel">가격</strong>
                  <div class="infocontent" id="costs">170,000원</div>
                </li>
                <li>
                  <strong class="infolabel">추가 후기글</strong>
                  <div class="infocontent word" id="" style="margin-top: 3px">
                    처음에 고개를 젖히고 봐야할까봐 걱정했는데 생각보다 목이
                    아플 정도는 아니었어요. 전체적인 장면을 눈에 모두 담기에는
                    조금 힘들었습니다. 앞사람머리에 시야가 방해되지는 않아요.
                    배우님들의 연기는 한번에 볼 수 있습니다.
                  </div>
                </li>
              </ul>
              <button
                class="btn"
                onclick="win_open('all_review_popup2.html','b','width=1000px height=500px')"
              >
                더보기
              </button>
              <div class="map"></div>
            </div>
          </div>
          <hr />
        </div>

        <div class="forhr">
          <div class="card">
            <div class="num"></div>
            <img
              src="./img/review_img_example05.jpg"
              width=""
              alt=""
              class="cardImg"
            />
            <div class="cardContent">
              <p class="title">R석 2층 1열 7번</p>
              <br />
              <ul class="info">
                <li>
                  <strong class="infolabel">장소</strong>
                  <div class="infocontent mapopen">
                    <span class="infocontent_title">신한 블루스퀘어</span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-caret-right-fill"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"
                      />
                    </svg>
                  </div>
                </li>
                <li>
                  <strong class="infolabel">가격</strong>
                  <div class="infocontent" id="costs">140,000원</div>
                </li>
                <li>
                  <strong class="infolabel">추가 후기글</strong>
                  <div class="infocontent word" id="" style="margin-top: 3px">
                    생각보다 멀게 느껴지지 않아요. 개인적으로는 1층의 뒷좌석보다
                    2층의 1열 자리가 시야 가림이 없어 더 좋은 것 같아요.
                    배우들의 얼굴 표정이 1층보다 잘 보이진 않지만 전체적인 동선,
                    극의 흐름은 더 잘 보였어요.
                  </div>
                </li>
              </ul>
              <button
                class="btn"
                onclick="win_open('all_review_popup3.html','c','width=1000px height=500px')"
              >
                더보기
              </button>
              <div class="map"></div>
            </div>
          </div>
          <hr />
        </div>

        <div class="forhr">
          <div class="card">
            <div class="num"></div>
            <img src="./img/review_img_example04.jpg" alt="" class="cardImg" />
            <div class="cardContent">
              <p class="title">1층 B구역 8열</p>
              <br />
              <ul class="info">
                <li>
                  <strong class="infolabel">장소</strong>
                  <div class="infocontent mapopen">
                    <span class="infocontent_title"> 경기아트센터 소극장</span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-caret-right-fill"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"
                      />
                    </svg>
                  </div>
                </li>
                <li>
                  <strong class="infolabel">가격</strong>
                  <div class="infocontent" id="costs">50,000원</div>
                </li>
                <li>
                  <strong class="infolabel">추가 후기글</strong>
                  <div class="infocontent word" id="" style="margin-top: 3px">
                    사진처럼 전체적인 시야는 정말 눈에 잘들어옵니다. 하지만
                    자리가 너무 좁아서 관람하는 동안 너무 불편했어요. 자리를
                    넓히는 보수가 필요한 것 같아요!!
                  </div>
                </li>
              </ul>
              <button
                class="btn"
                onclick="win_open('all_review_popup4.html','c','width=1000px height=500px')"
              >
                더보기
              </button>
              <div class="map"></div>
            </div>
          </div>
          <hr />
        </div>

        <div class="forhr">
          <div class="card">
            <div class="num"></div>
            <img src="./img/review_img_example06.jpg" alt="" class="cardImg" />
            <div class="cardContent">
              <p class="title">R석 2층 1열 7번</p>
              <br />
              <ul class="info">
                <li>
                  <strong class="infolabel">장소</strong>
                  <div class="infocontent mapopen">
                    <span class="infocontent_title">신한 블루스퀘어</span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-caret-right-fill"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"
                      />
                    </svg>
                  </div>
                </li>
                <li>
                  <strong class="infolabel">가격</strong>
                  <div class="infocontent" id="costs">140,000원</div>
                </li>
                <li>
                  <strong class="infolabel">추가 후기글</strong>
                  <div class="infocontent word" id="" style="margin-top: 3px">
                    배우님들의 성량과 발성이 좋아선지 매우 소리가
                    잘들렸습니다.생각보다 무대가 가까웠지만 오페라 글라스는
                    필수에요!
                  </div>
                </li>
              </ul>
              <button
                class="btn btn-primary"
                data-toggle="popover"
                title="Popover title"
                data-content="Lorem Ipsum Dolor Lorem Ipsum Dolor Lorem Ipsum Dolor"
              >
                더보기
              </button>
              <div class="map"></div>
            </div>
          </div>
          <hr />
        </div>

        <div class="forhr">
          <div class="card">
            <div class="num"></div>
            <img src="./img/review_img_example03.jpg" alt="" class="cardImg" />
            <div class="cardContent">
              <p class="title">1층 B구역 8열</p>
              <br />
              <ul class="info">
                <li>
                  <strong class="infolabel">장소</strong>
                  <div class="infocontent mapopen">
                    <span class="infocontent_title">경기아트센터 소극장</span>
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      fill="currentColor"
                      class="bi bi-caret-right-fill"
                      viewBox="0 0 16 16"
                    >
                      <path
                        d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"
                      />
                    </svg>
                  </div>
                </li>
                <li>
                  <strong class="infolabel">가격</strong>
                  <div class="infocontent" id="costs">50,000원</div>
                </li>
                <li>
                  <strong class="infolabel">추가 후기글</strong>
                  <div class="infocontent word" id="" style="margin-top: 3px">
                    최악의 자리입니다. 디스크가 있는 분들에게는 정말 고통스러운
                    시간을 선사하는 자리입니다. 좋은 작품이 좌석때문에 망쳐졌다.
                    시야만 좋은 자리다....
                  </div>
                </li>
              </ul>
              <button
                class="btn"
                onclick="win_open('all_review_popup.html','a','width=1000px height=500px')"
              >
                더보기
              </button>
              <div class="map"></div>
            </div>
          </div>
          <hr />
        </div>
      </div>
    </div>
    <footer>
      <img
        src="/img/logo2.png"
        alt="팀 로고"
        class="mainlogo"
        onclick="gotoMain()"
      />
      <div style="margin-left: 40px">
        <em>포스코X코딩온 웹 풀스택 8기 첫번째 프로젝트</em>
        <br />
        육회함조 - 이동준, 전주현, 장창현
      </div>
    </footer>
  </body>
  <script src="/js/review_navermap.js"></script>
  <script>
    //리뷰들을 보여줄 요소
    let ticket = document.querySelector(".ticketContents");
    // 리뷰별 번호
    let num = document.querySelectorAll(".num");
    // 각리뷰 정보를 담고있는 클래스
    let list = document.querySelectorAll(".forhr");

    //테마 분류저장 변수
    var selectText;

    //검색어에 대한 정보가 없을떄 출력할 '검색된 후기가 없습니다.' 설정
    let message = document.createElement("div");
    message.innerHTML = "<h2>검색된 후기가 없습니다.</h2>";
    message.style.textAlign = "center";
    message.style.position = "relative";
    message.style.top = "30vw";
    ticket.append(message);
    message.classList.add("hidden");

    //테마 선택을 하면 option에 선택한 테마가 출력
    function changeThemeSelect() {
      var themeSelect = document.getElementById("selectbox");
      var selectValue = themeSelect.options[themeSelect.selectedIndex].value;
      selectText = themeSelect.options[themeSelect.selectedIndex].text;

      $("#selectbox option:selected").text();
    }

    //테마에 따른 리뷰 분류
    //테마가 좌석일떄는 좌석 번호와 입력값 비교
    //테마가 장소일떄는 장소 이름과 입력값 비교하여 해당하지 않는 각리뷰 정보를 담고있는 클래스들을 hidden을 통해 사라지게 함
    function f_search_review() {
      var search = document.getElementById("search_review").value;
      var title = document.querySelectorAll(".title");
      var place = document.querySelectorAll(".infocontent_title");
      for (let i = 0; i < title.length; i++) {
        if (selectText === "좌석") {
          if (!title[i].innerText.includes(search)) {
            list[i].classList.add("hidden");
          } else {
            list[i].classList.remove("hidden");
          }
        } else if (selectText === "장소") {
          if (!place[i].innerText.includes(search)) {
            list[i].classList.add("hidden");
          } else {
            list[i].classList.remove("hidden");
          }
        } else {
          alert("검색테마를 선택해주세요.");
          break;
        }
      }

      //검색할때마다 리뷰들 번호를 새로 매겨줌
      let count = 0;
      let check = 0;
      for (let i = 0; i < list.length; i++) {
        if (!list[i].classList.contains("hidden")) {
          count += 1;
          num[i].innerText = "[" + count + "]";
          message.classList.add("hidden");
        } else {
          check += 1;
          if (check === list.length) {
            message.classList.remove("hidden");
          }
        }
      }
    }
    for (let i = 0; i < num.length; i++) {
      num[i].innerText = "[" + (i + 1) + "]";
    }

    function gotoMain() {
      location.href = "index.html";
    }
    //0726 사이드바 스크립트
    $(document).ready(function () {
        $(".menu_btn>a").on("click", function () {
          $(".menu_bg").show();
          $(".sidebar_menu").show().animate({
            right: 0,
          });
        });
        $(".close_btn>a").on("click", function () {
          $(".menu_bg").hide();
          $(".sidebar_menu").animate(
            {
              right: "-" + 50 + "%",
            },
            function () {
              $(".sidebar_menu").hide();
            }
          );
        });
      });
  </script>
  <script src="./js/cookieCheck.js"></script>
</html>
